<!--
Formular zum UserTask "Korrekturbedarf mitteilen"
Mehr Infos zu Bootstrap: https://www.w3schools.com/bootstrap/default.asp
Mehr Infos zu AngularJS: https://angularjs.org/ und https://www.w3schools.com/angular/default.asp
Mehr Infos zu Camunda Embedded Forms: https://docs.camunda.org/manual/7.7/reference/embedded-forms/
Mehr Infos zu HTML Forms: https://www.w3schools.com/html/html_forms.asp
-->
<form name="camundaForm">
    <div class="alert alert-warning">
        Ihre Personalien sind nicht korrekt, respektive können im Personenregister nicht verifiziert werden.
    </div>    

    <table class="table">
        <tr>
            <th ng-show="vn !== null">AHV-Nummer</th>  
            <td ng-show="vn !== null">{{vn}}</td>
        </tr>
        <tr>
            <th>Vorname</th>
            <td>{{firstName}}</td>
        </tr>
        <tr>
            <th>Nachname</th>
            <td>{{officialName}}</td>
        </tr>
        <tr>
            <th>Geschlecht</th>
            <td>{{sexText}}</td>
        </tr>
        <tr>
            <th>Geburtsdatum</th>
            <td>{{dateOfBirth| date:'dd.MM.yyyy'}}</td>
        </tr>
    </table>

    <div>
        <label>Wollen Sie Ihre Eingaben korrigieren?</label>
        <input type="checkbox"
               cam-variable-name="revisionDesired"
               cam-variable-type="Boolean">
    </div>

    <script cam-script type="text/form-script">
        camForm.on('form-loaded', function() {
            camForm.variableManager.fetchVariable('vn');
            camForm.variableManager.fetchVariable('firstName');
            camForm.variableManager.fetchVariable('officialName');
            camForm.variableManager.fetchVariable('sex')
            camForm.variableManager.fetchVariable('dateOfBirth');
        });

        camForm.on('variables-fetched', function() {
            $scope.vn = camForm.variableManager.variableValue('vn');
            $scope.firstName = camForm.variableManager.variableValue('firstName');
            $scope.officialName = camForm.variableManager.variableValue('officialName');
            $scope.sex = camForm.variableManager.variableValue('sex');
            $scope.dateOfBirth = camForm.variableManager.variableValue('dateOfBirth');
            
            // Geschlecht von 1,2,3 in richtigen text umwandeln
            switch($scope.sex){
                case 1:
                    $scope.sexText = 'Männlich';
                    break;
                case 2:
                    $scope.sexText = 'Weiblich';
                    break;
                case 3:
                    $scope.sexText = 'Unbestimmt';
                    break;
            }
        });        
    </script>
</form>